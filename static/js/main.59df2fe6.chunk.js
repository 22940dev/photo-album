(this["webpackJsonpphoto-album"]=this["webpackJsonpphoto-album"]||[]).push([[0],{23:function(e,t,n){},38:function(e,t,n){e.exports=n(66)},43:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(34),c=n.n(r),l=(n(43),n(23),n(17)),i=n(2),u=n.n(i),s=(n(44),n(29),u.a.initializeApp({apiKey:"AIzaSyAFFHeU1hLNgWWNOtDivMEyoRSC5c31RNI",authDomain:"photo-album-viclo.firebaseapp.com",databaseURL:"https://photo-album-viclo.firebaseio.com",projectId:"photo-album-viclo",storageBucket:"photo-album-viclo.appspot.com",messagingSenderId:"710056511024"})),m=u.a.storage(),h=s,f=o.a.createContext({user:null}),p=function(e){var t=e.children,n=function(){var e=Object(a.useState)((function(){var e=h.auth().currentUser;return{initializing:!e,user:e}})),t=Object(l.a)(e,2),n=t[0],o=t[1];function r(e){o({initializing:!1,user:e})}return Object(a.useEffect)((function(){var e=h.auth().onAuthStateChanged(r);return function(){return e()}}),[]),n}(),r=n.initializing,c=n.user;return r?null:o.a.createElement(f.Provider,{value:{user:c}},t)},d=n(26),g=n(4);var b=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(l.a)(c,2),u=i[0],s=i[1],p=Object(a.useContext)(f).user;Object(a.useEffect)((function(){b()}),[]);var b=function(){var e=m.ref(p.email);console.log(u),e.listAll().then((function(e){e.items.forEach((function(e){e.getDownloadURL().then((function(e){-1===u.indexOf(e)&&s((function(t){return[].concat(Object(d.a)(t),[e])}))}))}))})).catch((function(e){console.log(e)}))};return o.a.createElement("div",null,p?o.a.createElement("header",{className:"App-header"},o.a.createElement("p",null,"Upload a Photo"),o.a.createElement("input",{type:"file",accept:"image/x-png,image/jpeg",onChange:function(e){!function(e){var t=new FileReader,n=e.target.files[0];n?(t.onload=function(){2===t.readyState&&(console.log(n),r(n))},t.readAsDataURL(e.target.files[0])):r(null)}(e)}}),o.a.createElement("button",{onClick:function(){n?m.ref(p.email).child(n.name).put(n).then((function(){m.ref(p.email).child(n.name).getDownloadURL().then((function(e){u.indexOf(e)<0&&s((function(t){return[].concat(Object(d.a)(t),[e])})),console.log(u),alert("Image uploaded successfully to Firebase.")}))})):alert("Please upload an image first.")}},"Upload to Firebase"),o.a.createElement("button",{onClick:function(){return b()}},"Get Images from Firebase"),o.a.createElement("button",{onClick:function(){return h.auth().signOut()}},"Sign Out"),o.a.createElement("div",{id:"photos"},u.map((function(e){return o.a.createElement("div",{key:e,className:"image"},o.a.createElement("img",{src:e,alt:""}),o.a.createElement("button",{onClick:function(){return t=e,void m.refFromURL(t).delete().then((function(){s(u.filter((function(e){return e!==t}))),alert("Picture is deleted successfully!")})).catch((function(e){console.log(e)}));var t}},"Delete"))})))):o.a.createElement(g.a,{to:{pathname:"/photo-album/"}}))},E=n(36),v=n(21),O=n.n(v);var A=function(){var e=Object(a.useContext)(f).user,t={signInFlow:"popup",signInOptions:[O.a.auth.GoogleAuthProvider.PROVIDER_ID,O.a.auth.EmailAuthProvider.PROVIDER_ID],credentialHelper:"none",callbacks:{signInSuccessWithAuthResult:function(){return!1}}};return o.a.createElement("header",{className:"App-header"},e?o.a.createElement(g.a,{to:{pathname:"/photo-album/upload"}}):o.a.createElement("div",null,o.a.createElement("h4",{style:{marginBottom:"2rem"}},"Please Sign In."),o.a.createElement(E.FirebaseAuth,{uiConfig:t,firebaseAuth:O.a.auth()})))},I=n(19);var j=function(){return o.a.createElement(p,null,o.a.createElement(I.a,null,o.a.createElement("div",{className:"App"},o.a.createElement("p",null,"Welcome to Photo Album. This is a tutorial for Firebase Cloud Storage and Authentication. Still in Progress."),o.a.createElement(g.d,null,o.a.createElement(g.b,{exact:!0,path:"/photo-album/upload",component:b}),o.a.createElement(g.b,{exact:!0,path:"/photo-album/",component:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.59df2fe6.chunk.js.map